{% load i18n %}
<div class="modal-header">
    <h3 class="modal-title">{% trans 'Invoicing' %}</h3>
</div>
<form novalidate name="form">
<div class="modal-body">
    <div class="radio">
        <label>
            <input type="radio" ng-model="invoicing.status" name="status" value="notinvoiced" ui-validate=" 'validateStatus($value)' ">
            {% trans 'Not invoiced' %}
        </label>
    </div>
    <div class="radio">
        <label>
            <input type="radio" ng-model="invoicing.status" name="status" value="invoiced">
            {% trans 'Invoiced' %}
        </label>
    </div>
    <div class="form-group" ng-if="invoicing.status == 'notinvoiced'">
        <label class="sr-only" for="reason">
            {% trans 'Reason' %}
        </label>
        <input type="text" class="form-control" id="reason" ng-model="invoicing.reason" placeholder="{%trans 'Reason' %}" ui-validate=" 'validateReason($value)' ">
    </div>
    <div ng-if="invoicing.status == 'invoiced'">
        <div class="form-group">
            <label class="sr-only" for="amount">{% trans 'Amount' %}</label>
            <div class="input-group">
                <input type="text" class="form-control" id="amount" ng-model="invoicing.amount" placeholder="{%trans 'Amount' %}" ui-validate=" 'validateAmount($value)' ">
                <div class="input-group-addon">â‚¬</div>
            </div>
        </div>
        <div class="radio">
            <label>
                <input type="radio" ng-model="invoicing.paiment_mode" name="paiment_mode" value="cash" ui-validate=" 'validatePaimentMode($value)' ">
                {% trans 'Cash' %}
            </label>
        </div>
        <div class="radio">
            <label>
                <input type="radio" ng-model="invoicing.paiment_mode" name="paiment_mode"  value="check">
                {% trans 'Check' %}
            </label>
        </div>
        <div class="radio">
            <label>
                <input type="radio" ng-model="invoicing.paiment_mode" name="paiment_mode"  value="notpaid">
                {% trans 'Not paid' %}
            </label>
        </div>
        <hr/>
        <div class="checkbox">
            <label>
                <input type="checkbox" ng-model="invoicing.more_invoices" name="more_invoices">{% trans 'Pay other invoices'%}
            </label>
        </div>
        <div ng-if="invoicing.more_invoices">
            <label for="selectInvoices"> {% trans 'Other invoices'%} </label>
                <select ng-show="remaining_invoices().length > 0" name="selectInvoices" id="selectInvoices" ng-model="add_invoice" ng-change="addSelectToList(add_invoice)"
                ng-options="invoice as invoice.desc for invoice in remaining_invoices()" value="invoice">
                </select>
        </div>
        <div ng-if="invoicing.more_invoices">
            <div ng-repeat="value in invoicing.additional_invoices">
                <span>{$ value.desc $}</span><span>
                <button type="button btn-default btn-xs" 
                ng-click="remove_invoice(value)"
                tooltip="Enlever cette facture"
                tooltip-placement="right"
                ><span aria-hidden="true">&times;</span><span class="sr-only">Remove</span>
            </button></span>
            </div>
        </div>
        <!--div ng-if="invoicing.paiment_mode == 'check'">
            <div class="form-group">
                <label>{% trans 'Bank' %}</label>
                <input type="text" class="form-control" ng-model="invoicing.check.bank" placeholder="{%trans 'Bank' %}" ui-validate=" 'validateBank($value)' ">
            </div>
            <div class="form-group">
                <label>{% trans 'Payer' %}</label>
                <input type="text" class="form-control" ng-model="invoicing.check.payer" placeholder="{%trans 'Payer' %}" ui-validate=" 'validatePayer($value)' ">
            </div>
            <div class="form-group">
                <label>{% trans 'Number' %}</label>
                <input type="text" class="form-control" min="0" ng-model="invoicing.check.number" placeholder="{%trans 'Number' %}" ui-validate=" 'validateNumber($value)' ">
            </div>
        </div-->
    </div>
</div>
<div class="modal-footer">
    <button class="btn btn-primary" ng-click="ok()" ng-disabled="form.$invalid">{% trans 'Validate' %}</button>
    <button class="btn btn-warning" ng-click="cancel()">{% trans 'Cancel' %}</button>
</div>
</form>